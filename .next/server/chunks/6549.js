"use strict";exports.id=6549,exports.ids=[6549],exports.modules={57175:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},62688:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(43210);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:i,iconNode:c,...o},x)=>(0,a.createElement)("svg",{ref:x,...n,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:d("lucide",l),...o},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(i)?i:[i]])),o=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...l},n)=>(0,a.createElement)(c,{ref:n,iconNode:t,className:d(`lucide-${s(i(e))}`,`lucide-${e}`,r),...l}));return r.displayName=i(e),r}},88233:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92093:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=r(60687),s=r(52316),l=r(35885),i=r(97e3),d=r(43210),n=r(57175),c=r(88233),o=r(51060);let x=({isOpen:e,onClose:t,serviceId:r,onDeleted:s})=>{let[l,i]=(0,d.useState)(!1),n=async()=>{if(!r)return;let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"";if(!e){console.error("No token found in cookies.");return}try{i(!0),await o.A.delete(`https://spa-backend-test.vercel.app/api/service/delete/${r}`,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0}),s(),t()}catch(e){console.error("Error deleting service:",e)}finally{i(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[90%] max-w-md",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this service? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm rounded-md bg-gray-200 hover:bg-gray-300",disabled:l,children:"Cancel"}),(0,a.jsx)("button",{onClick:n,disabled:l,className:`px-4 py-2 text-sm rounded-md text-white flex items-center justify-center gap-2 ${l?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:l?(0,a.jsxs)(a.Fragment,{children:["Deleting...",(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]})]}):"Delete"})]})]})}):null},m=({isOpen:e,onClose:t,onSave:r,newservice:s,onChange:l})=>{let[i,n]=(0,d.useState)([]),[c,x]=(0,d.useState)(!1);(0,d.useEffect)(()=>{e&&o.A.get("https://spa-backend-test.vercel.app/api/category").then(e=>{n(e.data.data),console.log("Fetched Categories:",e.data.data)}).catch(e=>console.error("Error fetching categories:",e))},[e]);let m=async()=>{x(!0);try{await r()}catch(e){console.error("Error saving service:",e)}finally{x(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Add service"}),(0,a.jsx)("button",{onClick:t,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Service Name"}),(0,a.jsx)("input",{name:"name",type:"text",value:s.name,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Category"}),(0,a.jsxs)("select",{name:"categoryId",value:s.categoryId,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),i.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Price"}),(0,a.jsx)("input",{name:"price",type:"text",value:s.price,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,a.jsx)("button",{onClick:m,disabled:c,className:"px-4 py-2 rounded-lg bg-[#008767] text-white hover:bg-[#006d50] w-full sm:w-auto flex items-center justify-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,a.jsx)("span",{children:"Saving..."})]}):"Save"})})]})]})}):null},h=({showModal:e,setShowModal:t,editForm:r,handleEditChange:s,serviceId:l,BURL:i,onSaveSuccess:n,onEdited:c})=>{let[x,m]=(0,d.useState)([]),[h,g]=(0,d.useState)(""),[p,u]=(0,d.useState)(""),[y,b]=(0,d.useState)(!1);if((0,d.useEffect)(()=>{e&&o.A.get(`${i}/category`).then(e=>{m(e.data.data)}).catch(e=>{console.error("Error fetching categories:",e)})},[e,i]),!e)return null;let f=async()=>{b(!0);try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"";await o.A.put(`${i}/service/edit/${l}`,{name:r.name,categoryId:r.categoryId,price:r.price},{headers:{Authorization:`Bearer ${e}`},withCredentials:!0}),g("Service updated successfully!"),u("success"),setTimeout(()=>{t(!1),g(""),u(""),n?.()},1500)}catch(e){console.error("Failed to update service:",e),g("Error updating service. Please try again."),u("error")}finally{b(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit service"}),(0,a.jsx)("button",{onClick:()=>{t(!1),g(""),u("")},className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold","aria-label":"Close Modal",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Name"}),(0,a.jsx)("input",{name:"name",type:"text",value:r.name,onChange:s,placeholder:"Enter service's full name",className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Category"}),(0,a.jsxs)("select",{name:"categoryId",value:r.categoryId,onChange:s,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767]",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),x.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Price"}),(0,a.jsx)("input",{name:"price",type:"number",value:r.price,onChange:s,placeholder:"Enter price",className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767]"})]}),h&&(0,a.jsx)("p",{className:`text-sm ${"error"===p?"text-red-600":"text-green-600"}`,children:h}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,a.jsx)("button",{onClick:f,disabled:y,className:`px-4 py-2 rounded-lg w-full sm:w-auto flex items-center justify-center ${y?"bg-[#006d50] cursor-not-allowed":"bg-[#008767] hover:bg-[#006d50]"} text-white`,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-1 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 000 16v-4l-3 3 3 3v-4a8 8 0 01-8-8z"})]}),(0,a.jsx)("span",{children:" Saving..."})]}):"Save"})})]})]})})},g="https://spa-backend-test.vercel.app/api";function p(){let[e,t]=(0,d.useState)({}),[r,p]=(0,d.useState)(null),[u,y]=(0,d.useState)(1),[b,f]=(0,d.useState)(!1),[v,w]=(0,d.useState)(null),[j,k]=(0,d.useState)({name:"",categoryId:"",price:0}),N=r?r.length:0,C=Math.ceil(N/3),A=3*u,S=A-3,E=[];for(let e=S;e<A&&r&&e<r.length;e++)E.push(r[e]);let M=e=>{k({...j,[e.target.name]:e.target.value})},[$,I]=(0,d.useState)(!1),[z,L]=(0,d.useState)({name:"",categoryId:"",price:0}),B=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"",t=await o.A.post(`${g}/service/create`,z,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});console.log("service added:",t?.data?.service),I(!1),R()}catch(e){console.error("Error adding service:",e)}},[D,W]=(0,d.useState)(!1),[F,P]=(0,d.useState)(null),[U,O]=(0,d.useState)(""),R=async()=>{try{let e=await o.A.get(`${g}/service`);console.log("API raw response:",e.data),Array.isArray(e.data.data)?p(e.data.data):Array.isArray(e.data)?p(e.data):console.error("Unexpected data structure:",e.data)}catch(e){console.error("Error fetching services:",e)}};return(0,a.jsxs)("div",{className:"relative bg-cover bg-center min-h-screen",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(s.default,{})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 space-y-20 md:ml-[260px]",children:(0,a.jsxs)("div",{className:"max-w-7xl w-full mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:"Service Management"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,a.jsx)("div",{className:"w-full sm:w-auto flex-grow sm:flex-grow-0 bg-white p-6 border-gray-200 rounded-3xl shadow-sm dark:bg-gray-800 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,a.jsx)(l.g,{icon:i.MQ9,className:"text-2xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-400 dark:text-white mb-1",children:"Total services"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:N})]})]})}),(0,a.jsxs)("button",{onClick:()=>I(!0),className:"w-full sm:w-auto bg-[#008767] text-white px-4 py-2 rounded-xl flex items-center justify-center space-x-2 hover:bg-[#006d50] transition",children:[(0,a.jsx)(l.g,{icon:i.QLR}),(0,a.jsx)("span",{children:"Add service"})]})]}),(0,a.jsx)(m,{isOpen:$,onClose:()=>I(!1),onSave:B,newservice:z,onChange:e=>{let{name:t,value:r}=e.target;L(e=>({...e,[t]:r}))}})]}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4 sm:p-6 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"service List"}),(0,a.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:(0,a.jsx)("p",{className:"text-green-700 font-medium whitespace-nowrap",children:"Active service"})})]}),(0,a.jsxs)("div",{className:"relative overflow-x-auto shadow-sm rounded-lg",children:[(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",children:"service Name"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:E.map((t,r)=>(0,a.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.name}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e[t.categoryId]||"Loading..."}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.price}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,a.jsx)("button",{className:"text-[#008767] dark:text-[#00b57e] hover:text-[#006d50] dark:hover:text-[#004f3a]",onClick:()=>{k({name:t.name||"",categoryId:t.categoryId||"",price:t.price||0}),O(t.id),f(!0)},children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)(h,{showModal:b,setShowModal:f,editForm:j,handleEditChange:M,serviceId:t.id,BURL:g||"",onEdited:R}),(0,a.jsx)("button",{onClick:()=>{P(t.id),W(!0)},className:"text-red-600 dark:text-red-500 hover:text-red-800",children:(0,a.jsx)(c.A,{size:18})})]})]},r))})]}),(0,a.jsx)(x,{isOpen:D,onClose:()=>W(!1),serviceId:F,onDeleted:R})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsxs)("p",{children:["Showing ",S+1," to ",Math.min(A,N)," of ",N," entries"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[(0,a.jsx)("button",{onClick:()=>y(e=>Math.max(e-1,1)),disabled:1===u,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3",children:[u," / ",C]}),(0,a.jsx)("button",{onClick:()=>y(e=>Math.min(e+1,C)),disabled:u===C,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Next"})]})]})]})]})})]})}},95689:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\soswo\\\\OneDrive\\\\Desktop\\\\spa-dashboard\\\\src\\\\app\\\\(admin)\\\\component\\\\service\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\soswo\\OneDrive\\Desktop\\spa-dashboard\\src\\app\\(admin)\\component\\service\\page.tsx","default")}};