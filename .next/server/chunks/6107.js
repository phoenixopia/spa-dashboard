"use strict";exports.id=6107,exports.ids=[6107],exports.modules={53078:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\soswo\\\\OneDrive\\\\Desktop\\\\spa-dashboard\\\\src\\\\app\\\\(admin)\\\\component\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\soswo\\OneDrive\\Desktop\\spa-dashboard\\src\\app\\(admin)\\component\\users\\page.tsx","default")},53536:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(60687),r=s(52316),l=s(35885),d=s(97e3),i=s(43210),n=s(57175),o=s(88233),c=s(51060);let x=({isOpen:e,onClose:t,userId:s,onDeleted:r})=>{let[l,d]=(0,i.useState)(null),[n,o]=(0,i.useState)(null),[x,m]=(0,i.useState)(!1),h=async()=>{if(s){m(!0);try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"",a=await c.A.delete(`https://spa-backend-test.vercel.app/api/user/delete/${s}`,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});d(a.data?.message||"User deleted successfully."),o(!0),r(),setTimeout(()=>{d(null),t()},2e3)}catch(e){d(e.response?.data?.message||"Failed to delete user. Please try again."),o(!1)}finally{m(!1)}}};return e?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[90%] max-w-md",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this user? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mb-4",children:[(0,a.jsx)("button",{onClick:()=>{d(null),o(null),t()},className:"px-4 py-2 text-sm rounded-md bg-gray-200 hover:bg-gray-300",disabled:x,children:"Cancel"}),(0,a.jsx)("button",{onClick:h,className:`px-4 py-2 text-sm rounded-md text-white flex items-center justify-center ${x?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,disabled:x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),"Deleting..."]}):"Delete"})]})]})}):null},m=({isOpen:e,onClose:t,onSave:s,newUser:r,onChange:l,setNewUserMessage:d})=>{let[n,o]=(0,i.useState)(!1),x=async()=>{o(!0);try{await s()}catch(e){if(c.A.isAxiosError(e)&&e.response){let t=e.response.data?.message||"Something went wrong while saving the user.";d(`Error: ${t}`)}else d("Error: Failed to connect to the server. Please try again.")}finally{o(!1)}};if(!e)return null;let m=r.message.toLowerCase().includes("success");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Add User"}),(0,a.jsx)("button",{onClick:t,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),r.message&&(0,a.jsx)("div",{className:`mb-4 px-4 py-2 rounded-md text-sm font-medium ${m?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:r.message}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"First Name"}),(0,a.jsx)("input",{name:"firstName",type:"text",value:r.firstName,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Last Name"}),(0,a.jsx)("input",{name:"lastName",type:"text",value:r.lastName,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Email"}),(0,a.jsx)("input",{name:"email",type:"email",value:r.email,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Phone Number"}),(0,a.jsx)("input",{name:"phoneNumber",type:"text",value:r.phoneNumber,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Password"}),(0,a.jsx)("input",{name:"password",type:"password",value:r.password,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,a.jsx)("button",{onClick:x,className:`px-4 py-2 rounded-lg text-white w-full sm:w-auto flex items-center justify-center ${n?"bg-[#008767] cursor-not-allowed":"bg-[#008767] hover:bg-[#006d50]"}`,disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),"Saving..."]}):"Save"})})]})]})})},h=({showModal:e,setShowModal:t,editForm:s,handleEditChange:r,userId:l,BURL:d,onUpdated:n})=>{let[o,x]=(0,i.useState)(null),[m,h]=(0,i.useState)(null),[u,p]=(0,i.useState)(!1);if(!e)return null;let g=async()=>{p(!0);try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"",a=await c.A.put(`${d}/user/edit/${l}`,{firstName:s.firstName,lastName:s.lastName,email:s.email,phoneNumber:s.phoneNumber,password:s.password},{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});x(a.data.message||"User updated successfully!"),h("success"),n(),t(!1)}catch(e){console.error("Failed to update user:",e),x(e.response?.data?.message||"Error updating user. Please try again."),h("error")}finally{p(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit User"}),(0,a.jsx)("button",{onClick:()=>{x(null),h(null),t(!1)},className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold","aria-label":"Close Modal",children:"\xd7"})]}),o&&(0,a.jsx)("div",{className:`mb-4 p-3 rounded-md text-sm ${"success"===m?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:o}),(0,a.jsxs)("div",{className:"space-y-4",children:[["firstName","lastName","email","phoneNumber","password"].map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"phoneNumber"===e?"Phone Number":e.charAt(0).toUpperCase()+e.slice(1)}),(0,a.jsx)("input",{name:e,type:"password"===e?"password":"text",value:s[e],onChange:r,placeholder:`Enter ${e.replace(/([A-Z])/g," $1").toLowerCase()}`,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767]"})]},e)),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,a.jsx)("button",{onClick:g,disabled:u,className:`px-4 py-2 rounded-lg w-full sm:w-auto flex items-center justify-center gap-2 text-white 
                ${u?"bg-[#006d50] cursor-not-allowed":"bg-[#008767] hover:bg-[#006d50]"}`,children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l5-5-5-5v4a10 10 0 100 20v-4l-5 5 5 5v-4a8 8 0 01-8-8z"})]}),"Saving..."]}):"Save"})})]})]})})},u="https://spa-backend-test.vercel.app/api";function p(){let[e,t]=(0,i.useState)(null),[s,p]=(0,i.useState)(1),[g,b]=(0,i.useState)(!1),[y,w]=(0,i.useState)({firstName:"",lastName:"",phoneNumber:"",email:"",updatedAt:"",password:""}),[f,N]=(0,i.useState)(""),[j,v]=(0,i.useState)(!1),[k,C]=(0,i.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",message:""}),[A,S]=(0,i.useState)(!1),[U,$]=(0,i.useState)(null),[M,E]=(0,i.useState)(""),z=e?e.length:0,L=Math.ceil(z/4),D=4*s,B=D-4,F=e?.slice(B,D)||[],P=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"";await c.A.post(`${u}/user/create`,k,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0})}catch(e){console.error("Error adding user:",e)}},W=async()=>{try{let e=await c.A.get(`${u}/user`);Array.isArray(e.data.data)?t(e.data.data):Array.isArray(e.data)?t(e.data):console.error("Unexpected data structure:",e.data)}catch(e){console.error("Error fetching users:",e)}};return(0,a.jsxs)("div",{className:"relative bg-cover bg-center min-h-screen",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(r.default,{})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 space-y-20 md:ml-[260px]",children:(0,a.jsxs)("div",{className:"max-w-7xl w-full mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:"User Management"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"w-full sm:w-auto flex-grow sm:flex-grow-0 bg-white p-6 border-gray-200 rounded-3xl shadow-sm dark:bg-gray-800 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,a.jsx)(l.g,{icon:d.X46,className:"text-2xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-400 dark:text-white mb-1",children:"Total Users"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:z})]})]}),M&&(0,a.jsx)("p",{className:"text-sm text-green-600 mt-4",children:M})]}),(0,a.jsxs)("button",{onClick:()=>v(!0),className:"w-full sm:w-auto bg-[#008767] text-white px-4 py-2 rounded-xl flex items-center justify-center space-x-2 hover:bg-[#006d50] transition",children:[(0,a.jsx)(l.g,{icon:d.QLR}),(0,a.jsx)("span",{children:"Add User"})]})]}),(0,a.jsx)(m,{isOpen:j,onClose:()=>v(!1),onSave:P,newUser:k,onChange:e=>{let{name:t,value:s}=e.target;C(e=>({...e,[t]:s}))},onAdd:()=>W(),setNewUserMessage:E}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4 sm:p-6 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"User List"}),(0,a.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:(0,a.jsx)("p",{className:"text-green-700 font-medium whitespace-nowrap",children:"Active Users"})})]}),(0,a.jsx)("div",{className:"relative overflow-x-auto shadow-sm rounded-lg",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",children:"User Name"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Phone Number"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:F.map((e,t)=>(0,a.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.firstName}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.phoneNumber}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:new Date(e.updatedAt).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,a.jsx)("button",{className:"text-[#008767] hover:text-[#006d50]",onClick:()=>{w({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phoneNumber:e.phoneNumber||"",updatedAt:e.updatedAt||"",password:""}),N(e.id),b(!0)},children:(0,a.jsx)(n.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>{$(e.id),S(!0)},className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(o.A,{size:18})})]})]},t))})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsxs)("p",{children:["Showing ",B+1," to ",Math.min(D,z)," of ",z," entries"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[(0,a.jsx)("button",{onClick:()=>p(e=>Math.max(e-1,1)),disabled:1===s,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3",children:[s," / ",L]}),(0,a.jsx)("button",{onClick:()=>p(e=>Math.min(e+1,L)),disabled:s===L,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Next"})]})]})]})]})}),(0,a.jsx)(h,{showModal:g,setShowModal:b,editForm:y,handleEditChange:e=>{w({...y,[e.target.name]:e.target.value})},userId:f,BURL:u||"",onUpdated:()=>{W(),E("âœ… User updated successfully."),setTimeout(()=>E(""),3e3)}}),(0,a.jsx)(x,{isOpen:A,onClose:()=>S(!1),userId:U,onDeleted:()=>W()})]})}},57175:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},62688:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(43210);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),d=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:d,iconNode:o,...c},x)=>(0,a.createElement)("svg",{ref:x,...n,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:i("lucide",l),...c},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]])),c=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...l},n)=>(0,a.createElement)(o,{ref:n,iconNode:t,className:i(`lucide-${r(d(e))}`,`lucide-${e}`,s),...l}));return s.displayName=d(e),s}},88233:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};