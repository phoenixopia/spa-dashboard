"use strict";exports.id=9767,exports.ids=[9767],exports.modules={58462:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\soswo\\\\OneDrive\\\\Desktop\\\\spa-dashboard\\\\src\\\\app\\\\(admin)\\\\component\\\\dashboard\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\soswo\\OneDrive\\Desktop\\spa-dashboard\\src\\app\\(admin)\\component\\dashboard\\page.tsx","default")},67100:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(60687),r=s(52316),l=s(43210),d=s(35885),i=s(97e3),n=s(85814),o=s.n(n),c=s(51060),x=s(96082);let m="https://spa-backend-test.vercel.app/api";function g(){let[e,t]=(0,l.useState)(0);console.log("\n\n toaday booking",e);let[s,n]=(0,l.useState)(0),[g,u]=(0,l.useState)(0),[p,b]=(0,l.useState)(0),[y,j]=(0,l.useState)(0),[f,v]=(0,l.useState)(0),[N,k]=(0,l.useState)(1),[w,S]=(0,l.useState)([]),[C,A]=(0,l.useState)(null),[D,T]=(0,l.useState)(!1),[B,M]=(0,l.useState)({name:"",serviceId:"",price:"",status:"",customerName:"",date:"",time:"",phoneNumber:"",email:""}),[P,I]=(0,l.useState)({name:"",serviceId:"",price:"",status:"",customerName:"",date:"",time:"",phoneNumber:"",email:""}),$=Math.ceil(w.length/3),U=w.slice((N-1)*3,3*N),[z,L]=(0,l.useState)({}),R=()=>{T(!1),A(null)},E=e=>{S(w.map(t=>t===C?{...t,status:e}:t)),R()},F=async()=>{try{let e=await c.A.get(`${m}/booking`);Array.isArray(e.data.data)?S(e.data.data):console.error("Unexpected data structure:",e.data)}catch(e){console.error("Error fetching bookings:",e)}};return(0,a.jsxs)("div",{className:"relative bg-cover bg-center min-h-screen",style:{backgroundImage:'url("/Image/banner-bg.jpg")'},children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(r.default,{})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 space-y-20 md:ml-[260px]",children:(0,a.jsxs)("div",{className:"max-w-7xl w-full mx-auto",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8 flex justify-between items-center",children:[(0,a.jsxs)("span",{children:["Hello Admin ",(0,a.jsx)("span",{className:"inline-block mr-2",children:"\uD83D\uDC4B,"})]}),(0,a.jsx)(o(),{href:"/notification",className:"focus:outline-none",children:(0,a.jsx)(d.g,{icon:i.z$e,className:"text-2xl cursor-pointer"})})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm p-2 mb-8",children:(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(h,{icon:i.MQ9,title:"Total Services",value:y}),(0,a.jsx)(h,{icon:i.gdJ,title:"Total Users",value:p}),(0,a.jsx)(h,{icon:i.wM0,title:"Total Books",value:f})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm p-2 mb-8",children:(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(h,{icon:i.zbc,title:"Total Blogs",value:g}),(0,a.jsx)(h,{icon:i.gdJ,title:"Total Testimonials",value:s}),(0,a.jsx)(h,{icon:i.wM0,title:"Today Booked",value:e})]})}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4 sm:p-6 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Booking List"}),(0,a.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:(0,a.jsx)("p",{className:"text-green-700 font-medium whitespace-nowrap",children:"Latest booked"})})]}),(0,a.jsxs)("div",{className:"relative overflow-x-auto shadow-sm rounded-lg",children:[(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Customer Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Service"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Phone Number"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",children:"Status"})]})}),(0,a.jsx)("tbody",{children:U.map(e=>(0,a.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:`${e.firstName} ${e.lastName}`}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:z[e.serviceId]||"Loading..."}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:e.phoneNumber}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:e.email||"null"}),(0,a.jsx)("td",{className:"px-6 py-3 text-right",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${"Approved"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status})})]},e.id))})]}),C&&(0,a.jsx)(x.A,{showModal:D,setShowModal:T,editForm:B,handleAddBookingChange:e=>{let{name:t,value:s}=e.target;I(e=>({...e,[t]:s})),F()},serviceId:C.service,BURL:m||"",closeModal:()=>T(!1),selectedItem:C,refreshData:F})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsx)("button",{onClick:()=>k(e=>Math.max(e-1,1)),disabled:1===N,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",N," of ",$]}),(0,a.jsx)("button",{onClick:()=>k(e=>Math.min(e+1,$)),disabled:N===$,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-50",children:"Next"})]})]})]})}),D&&C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Booking Details"}),(0,a.jsx)("button",{onClick:R,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("p",{className:"mb-5 text-sm text-center text-gray-600 dark:text-gray-300",children:["Update status for ",(0,a.jsx)("strong",{children:C.customerName})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Date:"})," ",C.date]}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Time:"})," ",C.time]})]}),(0,a.jsxs)("div",{className:"mb-4 items-center",children:[(0,a.jsx)("label",{htmlFor:"status",className:"block mb-2 text-sm font-medium text-[#008767] dark:text-gray-300",children:"Change Status"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("select",{id:"status",value:C.status,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767] pr-10",children:[(0,a.jsx)("option",{value:"Approved",children:"Approved"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Rejected",children:"Rejected"})]})})]})]})})]})}function h({icon:e,title:t,value:s}){return(0,a.jsxs)("div",{className:"flex items-center space-x-4 dark:bg-green-100/10 p-4 rounded-md border-r-gray-100 lg:border-r",children:[(0,a.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,a.jsx)(d.g,{icon:e,className:"text-2xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-lg font-semibold text-gray-300 dark:text-white mb-1",children:t}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s})]})]})}},96082:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(60687),r=s(43210),l=s(51060);let d=({showModal:e,selectedItem:t,closeModal:s,setShowModal:d,refreshData:i})=>{let[n,o]=(0,r.useState)(t?.status||"Pending"),[c,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&o(t.status)},[t]);let p=async()=>{u(!0);try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"";await l.A.put(`https://spa-backend-test.vercel.app/api/booking/edit/${t?.id}`,{status:n},{headers:{Authorization:`Bearer ${e}`},withCredentials:!0}),x("Booking status updated successfully!"),g("success"),setTimeout(()=>{d(!1),x(""),g(""),u(!1),i&&i()},1500)}catch(e){console.error("Error updating booking status:",e),x("Failed to update status. Please try again."),g("error"),u(!1)}};if(!e||!t)return null;let b=t.dateTime?new Date(t.dateTime):null;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Booking Details"}),(0,a.jsx)("button",{onClick:s,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("p",{className:"mb-5 text-sm text-center text-gray-600 dark:text-gray-300",children:["Update status for ",(0,a.jsx)("strong",{children:t.customerName||"Customer"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Date:"})," ",t.dateTime?new Date(t.dateTime).toLocaleDateString():"N/A"]}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Time:"})," ",b?b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"status",className:"block mb-2 text-sm font-medium text-[#008767] dark:text-gray-300",children:"Change Status"}),(0,a.jsxs)("select",{id:"status",value:n,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767] pr-10",children:[(0,a.jsx)("option",{value:"Approved",children:"Approved"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),c&&(0,a.jsx)("p",{className:`mt-2 text-sm text-center ${"success"===m?"text-green-600":"text-red-600"}`,children:c}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:p,disabled:h,className:"bg-[#008767] text-white px-4 py-2 rounded-lg hover:bg-[#006d50] transition flex items-center justify-center gap-2 min-w-[120px]",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,a.jsx)("span",{children:"Saving..."})]}):"Save Changes"})})]})})}}};