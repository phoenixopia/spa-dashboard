"use strict";exports.id=9612,exports.ids=[9612],exports.modules={4517:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\soswo\\\\OneDrive\\\\Desktop\\\\spa-dashboard\\\\src\\\\app\\\\(admin)\\\\component\\\\booking\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\soswo\\OneDrive\\Desktop\\spa-dashboard\\src\\app\\(admin)\\component\\booking\\page.tsx","default")},51852:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(60687),r=s(52316),l=s(35885),d=s(97e3),i=s(43210),n=s(51060);let o=({isOpen:e,onClose:t,onSave:s,newbooking:r,onChange:l})=>{let[d,o]=(0,i.useState)([]),[c,x]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e&&n.A.get("https://spa-backend-test.vercel.app/api/service").then(e=>{o(e.data.data),console.log("Fetched Categories:",e.data.data)}).catch(e=>console.error("Error fetching categories:",e))},[e]);let m=async()=>{x(!0);try{await s()}finally{x(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Add booking"}),(0,a.jsx)("button",{onClick:t,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"booking Name"}),(0,a.jsx)("input",{name:"name",type:"text",value:r.name,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"service"}),(0,a.jsxs)("select",{name:"serviceId",value:r.serviceId,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select a service"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Price"}),(0,a.jsx)("input",{name:"price",type:"text",value:r.price,onChange:l,className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,a.jsx)("button",{onClick:m,className:"px-4 py-2 rounded-lg bg-[#008767] text-white hover:bg-[#006d50] w-full sm:w-auto flex items-center justify-center gap-2",disabled:c,children:c?(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}):"Save"})})]})]})}):null};var c=s(96082);let x="https://spa-backend-test.vercel.app/api";function m(){let[e,t]=(0,i.useState)(null),[s,m]=(0,i.useState)(1),[g,h]=(0,i.useState)(!1),[p,u]=(0,i.useState)(0),[b,y]=(0,i.useState)(null),[f,j]=(0,i.useState)({name:"",serviceId:"",price:0,status:"",customerName:"",date:"",time:"",phoneNumber:"",email:""}),v=e?e.length:0,N=Math.ceil(v/3),w=3*s,[k,C]=(0,i.useState)({}),S=async()=>{try{let e=await n.A.get(`${x}/booking`);console.log("API response:",e.data),Array.isArray(e.data.data)?t(e.data.data):console.error("Unexpected data structure:",e.data)}catch(e){console.error("Error fetching bookings:",e)}},A=e?e.slice(w-3,w):[],B=e=>{y(e),j({name:e.name,serviceId:e.serviceId,price:e.price,status:e.status,customerName:e.customerName,date:e.date,time:e.time,phoneNumber:e.phoneNumber,email:e.email}),h(!0)},[I,M]=(0,i.useState)(!1),[D,P]=(0,i.useState)({name:"",serviceId:"",price:0,status:"",customerName:"",date:"",time:"",phoneNumber:"",email:""}),T=e=>{let{name:t,value:s}=e.target;P(e=>({...e,[t]:s})),S()},$=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"",t=await n.A.post(`${x}/booking/create`,D,{headers:{Authorization:`Bearer ${e}`},withCredentials:!0});console.log("Booking added:",t?.data?.booking),M(!1),S()}catch(e){console.error("Error adding booking:",e)}};return(0,a.jsxs)("div",{className:"relative bg-cover bg-center min-h-screen",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(r.default,{})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 space-y-20 md:ml-[260px]",children:(0,a.jsxs)("div",{className:"max-w-7xl w-full mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:"Booking Management"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[(0,a.jsx)("div",{className:"w-full sm:w-auto bg-white p-6 border-gray-200 rounded-3xl shadow-sm dark:bg-gray-800 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,a.jsx)(l.g,{icon:d.wM0,className:"text-2xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-400 dark:text-white mb-1",children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:v})]})]})}),(0,a.jsx)("div",{className:"w-full sm:w-auto bg-white p-6 border-gray-200 rounded-3xl shadow-sm dark:bg-gray-800 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,a.jsx)(l.g,{icon:d.wM0,className:"text-2xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-400 dark:text-white mb-1",children:"Total Bookings for Today"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:p})]})]})})]}),(0,a.jsx)(o,{isOpen:I,onClose:()=>M(!1),onSave:$,newbooking:D,onChange:T}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4 sm:p-6 dark:bg-gray-900",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Booking List"})}),(0,a.jsx)("div",{className:"relative overflow-x-auto shadow-sm rounded-lg",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Customer Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Service"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Phone Number"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",children:"Status"})]})}),(0,a.jsx)("tbody",{children:A.map(e=>(0,a.jsxs)("tr",{onClick:()=>B(e),className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:`${e.firstName} ${e.lastName}`}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:k[e.serviceId]||"Loading..."}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:e.phoneNumber}),(0,a.jsx)("td",{className:"px-6 py-3 text-left",children:e.email||"null"}),(0,a.jsx)("td",{className:"px-6 py-3 text-right",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${"Approved"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status})})]},e.id))})]})}),b&&(0,a.jsx)(c.A,{showModal:g,setShowModal:h,editForm:f,handleAddBookingChange:T,serviceId:b.serviceId,BURL:x||"",closeModal:()=>h(!1),selectedItem:b,refreshData:S}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsx)("button",{onClick:()=>m(e=>Math.max(e-1,1)),disabled:1===s,className:"px-4 py-2 bg-gray-200 text-gray-600 rounded-lg",children:"Previous"}),(0,a.jsxs)("span",{className:"text-gray-700",children:["Page ",s," of ",N]}),(0,a.jsx)("button",{onClick:()=>{m(e=>Math.min(e+1,N))},disabled:s===N,className:"px-4 py-2 bg-gray-200 text-gray-600 rounded-lg",children:"Next"})]})]})]})})]})}},96082:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(60687),r=s(43210),l=s(51060);let d=({showModal:e,selectedItem:t,closeModal:s,setShowModal:d,refreshData:i})=>{let[n,o]=(0,r.useState)(t?.status||"Pending"),[c,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&o(t.status)},[t]);let u=async()=>{p(!0);try{let e=document.cookie.split("; ").find(e=>e.startsWith("token="))?.split("=")[1]||"";await l.A.put(`https://spa-backend-test.vercel.app/api/booking/edit/${t?.id}`,{status:n},{headers:{Authorization:`Bearer ${e}`},withCredentials:!0}),x("Booking status updated successfully!"),g("success"),setTimeout(()=>{d(!1),x(""),g(""),p(!1),i&&i()},1500)}catch(e){console.error("Error updating booking status:",e),x("Failed to update status. Please try again."),g("error"),p(!1)}};if(!e||!t)return null;let b=t.dateTime?new Date(t.dateTime):null;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Booking Details"}),(0,a.jsx)("button",{onClick:s,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("p",{className:"mb-5 text-sm text-center text-gray-600 dark:text-gray-300",children:["Update status for ",(0,a.jsx)("strong",{children:t.customerName||"Customer"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Date:"})," ",t.dateTime?new Date(t.dateTime).toLocaleDateString():"N/A"]}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg text-sm text-gray-800 dark:text-white shadow-sm",children:[(0,a.jsx)("strong",{children:"Time:"})," ",b?b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"status",className:"block mb-2 text-sm font-medium text-[#008767] dark:text-gray-300",children:"Change Status"}),(0,a.jsxs)("select",{id:"status",value:n,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#008767] pr-10",children:[(0,a.jsx)("option",{value:"Approved",children:"Approved"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),c&&(0,a.jsx)("p",{className:`mt-2 text-sm text-center ${"success"===m?"text-green-600":"text-red-600"}`,children:c}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:u,disabled:h,className:"bg-[#008767] text-white px-4 py-2 rounded-lg hover:bg-[#006d50] transition flex items-center justify-center gap-2 min-w-[120px]",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,a.jsx)("span",{children:"Saving..."})]}):"Save Changes"})})]})})}}};