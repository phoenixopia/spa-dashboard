"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7623],{4:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(5155),l=a(4938),r=a(7489),i=a(3578),n=a(2115),d=a(6766),o=a(9917),c=a(2525),m=a(3464);let x=e=>{let{isOpen:t,onClose:a,testimonialId:l,onDeleted:r}=e,[i,d]=(0,n.useState)(!1),o=async()=>{var e;if(!l)return;let t=(null===(e=document.cookie.split("; ").find(e=>e.startsWith("token=")))||void 0===e?void 0:e.split("=")[1])||"";if(!t){console.error("No token found in cookies.");return}try{d(!0),await m.A.delete("".concat("https://spa-backend-test.vercel.app/api","/testimonial/delete/").concat(l),{headers:{Authorization:"Bearer ".concat(t)},withCredentials:!0}),r(),a()}catch(e){console.error("Error deleting testimonial:",e)}finally{d(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[90%] max-w-md",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Delete"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this testimonial? This action cannot be undone."}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm rounded-md bg-gray-200 hover:bg-gray-300",disabled:i,children:"Cancel"}),(0,s.jsx)("button",{onClick:o,disabled:i,className:"px-4 py-2 text-sm rounded-md text-white flex items-center gap-2 ".concat(i?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,s.jsx)("span",{children:"Deleting..."})]}):"Delete"})]})]})}):null},h="https://spa-backend-test.vercel.app/api",g=e=>{let{isOpen:t,onClose:a,onSave:l,newtestimonial:r,onChange:i}=e,[d,o]=(0,n.useState)([]),[c,x]=(0,n.useState)(null),[g,u]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[y,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t?m.A.get("".concat(h,"/testimonial")).then(e=>{o(e.data.data),x(null)}).catch(e=>{console.error("Error fetching testimonials:",e),x("Failed to fetch testimonials.")}):(x(null),u(null),f(null))},[t]);let w=async()=>{b(!0);let e=new FormData;e.append("firstName",r.firstName),e.append("lastName",r.lastName),e.append("message",r.message),p&&e.append("image",p);try{var t;let a=(null===(t=document.cookie.split("; ").find(e=>e.startsWith("token=")))||void 0===t?void 0:t.split("=")[1])||"";await m.A.post("".concat(h,"/testimonial/create"),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},withCredentials:!0}),u("Testimonial added successfully!"),x(null),l()}catch(e){console.error(e),x("Failed to save testimonial. Please try again."),u(null)}finally{b(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Testimonial"}),(0,s.jsx)("button",{onClick:a,className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold",children:"\xd7"})]}),c&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded-md bg-red-100 border border-red-400 text-red-700 text-sm",children:c}),g&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded-md bg-green-100 border border-green-400 text-green-700 text-sm",children:g}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{name:"firstName",type:"text",placeholder:"First Name",value:r.firstName,onChange:i,className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),(0,s.jsx)("input",{name:"lastName",type:"text",placeholder:"Last Name",value:r.lastName,onChange:i,className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;null===(t=e.target.files)||void 0===t||t[0]},className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-[#008767] file:text-white hover:file:bg-[#006d50]"}),(0,s.jsx)("textarea",{name:"message",placeholder:"Message",value:r.message,onChange:i,rows:3,className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),(0,s.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:(0,s.jsx)("button",{onClick:w,disabled:y,className:"px-4 py-2 rounded-lg ".concat("bg-[#008767]"," text-white hover:").concat(y?"bg-[006d50]":"bg-[#006d50]"," transition-all"),children:y?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,s.jsx)("span",{className:"ml-2",children:"Saving..."})]}):"Save"})})]})]})}):null},u=e=>{let{showModal:t,setShowModal:a,editForm:l,handleEditChange:r,testimonialId:i,BURL:d,refresh:o}=e,[c,x]=(0,n.useState)(null),[h,g]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[f,y]=(0,n.useState)(!1);if(!t)return null;let b=async()=>{var e,t,s;try{y(!0);let t=(null===(e=document.cookie.split("; ").find(e=>e.startsWith("token=")))||void 0===e?void 0:e.split("=")[1])||"";console.log("Token:",t);let s=new FormData;for(let[e,t]of(s.append("firstName",l.firstName),s.append("lastName",l.lastName),s.append("message",l.message),c&&s.append("image",c),console.log("Form Data:"),s.entries()))console.log(e,t);let r=await m.A.put("".concat(d,"/testimonial/edit/").concat(i),s,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},withCredentials:!0});console.log("Response: edit testi",r),g("Testimonial updated successfully."),p("success"),setTimeout(()=>{a(!1),g(""),p(""),o()},1500)}catch(e){console.error("Error during request:",e),g((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error updating testimonial."),p("error")}finally{y(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 bg-opacity-50 flex items-center justify-center z-50 px-4 sm:px-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 w-full max-w-md dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Testimonial"}),(0,s.jsx)("button",{onClick:()=>{a(!1),g(""),p("")},className:"text-[#008767] hover:text-[#006d50] text-3xl font-bold","aria-label":"Close Modal",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"First Name"}),(0,s.jsx)("input",{name:"firstName",type:"text",value:l.firstName,onChange:r,placeholder:"Enter first name",className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Last Name"}),(0,s.jsx)("input",{name:"lastName",type:"text",value:l.lastName,onChange:r,placeholder:"Enter last name",className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Upload Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length>0&&x(e.target.files[0])},className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-[#008767] file:text-white hover:file:bg-[#006d50]"}),c&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",c.name]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 text-left text-gray-700 dark:text-gray-300",children:"Message"}),(0,s.jsx)("textarea",{name:"message",value:l.message,onChange:r,placeholder:"Enter testimonial message",className:"w-full border px-3 py-2 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),h&&(0,s.jsx)("p",{className:"text-sm ".concat("error"===u?"text-red-600":"text-green-600"),children:h}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mt-4",children:(0,s.jsx)("button",{onClick:b,disabled:f,className:"px-4 py-2 rounded-lg bg-[#008767] text-white hover:bg-[#006d50] w-full sm:w-auto",children:f?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),(0,s.jsx)("span",{className:"ml-2",children:"Saving..."})]}):"Save"})})]})]})})},p="https://spa-backend-test.vercel.app/api";function f(){let[e,t]=(0,n.useState)({}),[a,h]=(0,n.useState)(null),[f,y]=(0,n.useState)(1),[b,w]=(0,n.useState)(!1),[N,j]=(0,n.useState)(null),[v,k]=(0,n.useState)({firstName:"",imageURL:"",message:"",lastName:""}),C=a?a.length:0,A=Math.ceil(C/3),S=3*f,E=S-3,M=[];for(let e=E;e<S&&a&&e<a.length;e++)M.push(a[e]);let L=e=>{k({...v,[e.target.name]:e.target.value})},[z,R]=(0,n.useState)(!1),[U,F]=(0,n.useState)({firstName:"",lastName:"",message:"",imageURL:""}),T=async()=>{try{var e,t;let a=(null===(e=document.cookie.split("; ").find(e=>e.startsWith("token=")))||void 0===e?void 0:e.split("=")[1])||"";console.log(a);let s=await m.A.post("".concat(p,"/testimonial/create"),U,{headers:{Authorization:"Bearer ".concat(a)},withCredentials:!0});console.log("testimonial added:",null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.testimonial),R(!1),O()}catch(e){console.error("Error adding testimonial:",e)}},[B,W]=(0,n.useState)(!1),[D,I]=(0,n.useState)(null),[_,P]=(0,n.useState)(""),O=async()=>{try{let e=await m.A.get("".concat(p,"/testimonial"));console.log("API testimonial response:",e.data),Array.isArray(e.data.data)?h(e.data.data):Array.isArray(e.data)?h(e.data):console.error("Unexpected data structure:",e.data)}catch(e){console.error("Error fetching testimonials:",e)}};return(0,n.useEffect)(()=>{O()},[]),(0,n.useEffect)(()=>{if(null!==N&&a&&a[N]){let e=a[N];k({firstName:e.firstName||"",lastName:e.lastName||"",imageURL:e.imageURL||"",message:e.message||""})}},[N,a]),(0,n.useEffect)(()=>{m.A.get("".concat(p,"/testimonial")).then(e=>{let a={};e.data.data.forEach(e=>{a[e.id]=e.firstName}),t(a)}).catch(e=>console.error("Failed to load categories",e))},[]),(0,s.jsxs)("div",{className:"relative bg-cover bg-center min-h-screen",children:[(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(l.default,{})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 space-y-20 md:ml-[260px]",children:(0,s.jsxs)("div",{className:"max-w-7xl w-full mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:"testimonial Management"}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,s.jsx)("div",{className:"w-full sm:w-auto flex-grow sm:flex-grow-0 bg-white p-6 border-gray-200 rounded-3xl shadow-sm dark:bg-gray-800 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"bg-green-100 text-green-600 p-3 rounded-full",children:(0,s.jsx)(r.g,{icon:i.X46,className:"text-2xl"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-400 dark:text-white mb-1",children:"Total testimonials"}),(0,s.jsx)("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:C})]})]})}),(0,s.jsxs)("button",{onClick:()=>R(!0),className:"w-full sm:w-auto bg-[#008767] text-white px-4 py-2 rounded-xl flex items-center justify-center space-x-2 hover:bg-[#006d50] transition",children:[(0,s.jsx)(r.g,{icon:i.QLR}),(0,s.jsx)("span",{children:"Add testimonial"})]})]}),(0,s.jsx)(g,{isOpen:z,onClose:()=>R(!1),onSave:T,newtestimonial:U,onChange:e=>{let{name:t,value:a}=e.target;F(e=>({...e,[t]:a}))}})]}),(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4 sm:p-6 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"testimonial List"}),(0,s.jsx)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:(0,s.jsx)("p",{className:"text-green-700 font-medium whitespace-nowrap",children:"Active testimonial"})})]}),(0,s.jsxs)("div",{className:"relative overflow-x-auto shadow-sm rounded-lg",children:[(0,s.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3",children:"Message"}),(0,s.jsx)("th",{className:"px-6 py-3",children:"Picture"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:M.map((e,t)=>(0,s.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:"".concat(e.firstName," ").concat(e.lastName)}),(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.message}),(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:(0,s.jsx)(d.default,{src:e.imageURL,alt:"Item",height:400,width:400,className:"w-12 h-12 object-cover rounded-full"})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,s.jsx)("button",{className:"text-[#008767] dark:text-[#00b57e] hover:text-[#006d50] dark:hover:text-[#004f3a]",onClick:()=>{k({firstName:e.firstName||"",lastName:e.lastName||"",message:e.message||"",imageURL:e.imageURL||""}),P(e.id),w(!0)},children:(0,s.jsx)(o.A,{size:18})}),(0,s.jsx)(u,{showModal:b,setShowModal:w,editForm:v,handleEditChange:L,testimonialId:e.id,BURL:p||"",refresh:O}),(0,s.jsx)("button",{onClick:()=>{I(e.id),W(!0)},className:"text-red-600 dark:text-red-500 hover:text-red-800",children:(0,s.jsx)(c.A,{size:18})})]})]},t))})]}),(0,s.jsx)(x,{isOpen:B,onClose:()=>W(!1),testimonialId:D,onDeleted:O})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 text-sm text-gray-600 dark:text-gray-300",children:[(0,s.jsxs)("p",{children:["Showing ",E+1," to ",Math.min(S,C)," of ",C," entries"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[(0,s.jsx)("button",{onClick:()=>y(e=>Math.max(e-1,1)),disabled:1===f,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Previous"}),(0,s.jsxs)("span",{className:"px-3",children:[f," / ",A]}),(0,s.jsx)("button",{onClick:()=>y(e=>Math.min(e+1,A)),disabled:f===A,className:"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Next"})]})]})]})]})})]})}},2525:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9917:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(9946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},9946:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...d,width:l,height:l,stroke:a,strokeWidth:i?24*Number(r)/Number(l):r,className:n("lucide",o),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{className:d,...c}=a;return(0,s.createElement)(o,{ref:r,iconNode:t,className:n("lucide-".concat(l(i(e))),"lucide-".concat(e),d),...c})});return a.displayName=i(e),a}}}]);